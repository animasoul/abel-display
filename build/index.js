(()=>{"use strict";var e,t={987:(e,t,a)=>{const n=window.wp.element,l=window.wp.blocks,r=window.wp.blockEditor,o=window.wp.data,s=window.wp.compose,i=window.wp.apiFetch;var d=a.n(i);const c=window.wp.i18n;class p extends n.Component{constructor(){super(...arguments),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.handleTagChange=this.handleTagChange.bind(this),this.handleDisplayStyleChange=this.handleDisplayStyleChange.bind(this)}handleCategoryChange=e=>{const t=e.map((e=>e.value));this.props.setAttributes({category:t})};handleTagChange=e=>{this.props.setAttributes({tags:e})};handleDisplayStyleChange=e=>{this.props.setAttributes({displayStyle:e})};componentDidMount(){const{categories:e,tags:t,setAttributes:a}=this.props;e||d()({path:"/wp/v2/categories?_fields=id,name"}).then((e=>e.json())).then((e=>{a({fetchedCategories:e})})),t||d()({path:"/wp/v2/tags?_fields=id,name"}).then((e=>e.json())).then((e=>{a({fetchedTags:e})}))}componentDidUpdate(e){const{posts:t,setAttributes:a}=this.props;t!==e.posts&&a({posts:t}),t&&document.addEventListener("DOMContentLoaded",(()=>{if(null!==document.getElementById("abel-wrapper"))try{function e(e,t){let a;return function(){for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];clearTimeout(a),a=setTimeout((()=>{clearTimeout(a),e(...l)}),t)}}function t(e){return Math.floor(Math.random()*e)}function a(e,a){let n;do{n=e[t(e.length)]}while(n===a);return n}function n(e){const a=["circle","square","rectangle","ellipse","triangle","pentagon","hexagon"];let n;do{n=a[t(a.length)]}while(n===e);return n}function l(e,a){const n=["rotation","scale","skew"];let l;do{l=n[t(n.length)]}while(l===a);return"rotation"===l?e.style.animation=`rotate ${3+t(4)}s linear infinite`:"scale"===l?e.style.animation=`scale ${3+t(4)}s linear infinite`:"skew"===l&&(e.style.animation=`skew ${3+t(4)}s linear infinite`),l}function r(){const e=document.querySelectorAll(".shape"),t=["red","blue","green","yellow","purple"];e.forEach((e=>{const r=a(t);e.style.backgroundColor=r,e.style.borderColor=r;const o=n();"circle"===o?e.style.borderRadius="50%":"square"===o||"rectangle"===o?e.style.borderRadius="0":"ellipse"===o&&(e.style.borderRadius="50%");const s=e.parentElement.getBoundingClientRect(),i=Math.floor(s.width*(.5+.5*Math.random())),d="rectangle"===o?Math.floor(s.height*(.5+.5*Math.random())):i;e.style.width=`${i}px`,e.style.height=`${d}px`;const c=l(e);e.dataset.animation=c}))}function o(){const e=document.querySelectorAll(".shape"),t=Math.ceil(Math.sqrt(e.length));e.forEach(((e,a)=>{e.style.gridColumn=a%t+1+" / span 1",e.style.gridRow=`${Math.floor(a/t)+1} / span 1`}))}r();let s=setInterval(e(r,100),3e3);document.querySelectorAll(".shape").forEach((e=>{e.addEventListener("mouseover",(()=>{clearInterval(s),e.style.animationPlayState="paused"})),e.addEventListener("mouseout",(()=>{s=setInterval(r,3e3),e.style.animationPlayState="running"}))})),window.addEventListener("load",o),window.addEventListener("resize",o)}catch(i){console.error("An error occurred while executing the script:",i)}}))}render(){const{category:e,tag:t,posts:a,displayStyle:l}=this.props.attributes;return e&&t?a&&0!==a.length?(0,n.createElement)("div",{className:"abel-display-posts abel-display-style-"+l},a&&a.length>0?(0,n.createElement)("div",{id:"abel-wrapper"},a.map((e=>{const t=(e=>{if(e._embedded&&e._embedded["wp:featuredmedia"])return e._embedded["wp:featuredmedia"][0].source_url;const t=e.content?e.content.rendered:null,a=/<img[^>]+src="(http:\/\/[^">]+|https:\/\/[^">]+)"/g.exec(t);return a&&a[1]?a[1]:null})(e);return(0,n.createElement)("a",{className:"shape",href:e.link,key:e.id},t&&(0,n.createElement)("img",{src:t,alt:e.title.rendered,loading:"lazy"}),e.title.rendered)}))):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{id:"abel-wrapper"},(0,c.__)("No posts found.")))):(0,c.__)("No posts found."):(0,n.createElement)("div",{className:"wp-block-create-block-abel-display"},(0,n.createElement)("div",{id:"abel-wrapper"},(0,n.createElement)("div",{className:"shape"},"Loading...")))}}const u=(0,s.compose)([(0,o.withSelect)(((e,t)=>{const{getEntityRecords:a}=e("core"),{category:n,tag:l}=t.attributes,r={per_page:-1,post_status:"publish",post_type:"post",_embed:!0,_fields:"id,link,title.rendered,content.rendered,_embedded.wp:featuredmedia"};return n&&n.length&&(r.categories=n.join()),l&&l.length&&(r.tags=l.join()),{posts:a("postType","post",r)}})),(0,r.withColors)("backgroundColor","textColor")])(p),h=JSON.parse('{"u2":"create-block/abel-display"}'),g=window.wp.components,y=(0,o.withSelect)((e=>{const{getEntityRecords:t}=e("core");return{categories:t("taxonomy","category",{per_page:-1}),tags:t("taxonomy","post_tag",{per_page:-1})}}));(0,l.registerBlockType)(h.u2,{attributes:{category:{type:"array",default:[]},tag:{type:"array",default:[]},posts:{type:"array",default:[]},displayStyle:{type:"string",default:"default"}},edit:y((e=>{const{categories:t,tags:a,setAttributes:l}=e;return t&&a?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.InspectorControls,null,(0,n.createElement)(g.PanelBody,{title:"Filter Posts"},(0,n.createElement)(g.SelectControl,{label:"Category",multiple:!0,value:e.attributes.category,options:t.map((e=>({label:e.name,value:e.id}))),onChange:e=>l({category:e})}),(0,n.createElement)(g.SelectControl,{label:"Tag",multiple:!0,value:e.attributes.tag,options:a.map((e=>({label:e.name,value:e.id}))),onChange:e=>l({tag:e})}),(0,n.createElement)(g.SelectControl,{label:"Display Style",value:e.attributes.displayStyle,options:[{label:"Default",value:"default"},{label:"List",value:"list"},{label:"Grid",value:"grid"}],onChange:e=>l({displayStyle:e})}))),(0,n.createElement)(u,e)):"Loading..."})),save:e=>{let{attributes:t}=e;const{posts:a,displayStyle:l}=t;return 0===a.length?null:(0,n.createElement)("div",{className:`abel-display-posts abel-display-style-${l}`},a&&a.length>0?(0,n.createElement)("div",{id:"abel-wrapper"},a.map((e=>(0,n.createElement)("a",{key:e.id,className:"shape",href:e.link},e.title.rendered)))):(0,n.createElement)(n.Fragment,null,(0,c.__)("No posts found.")))}})}},a={};function n(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,l,r)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,l,r]=e[c],s=!0,i=0;i<a.length;i++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](a[i])))?a.splice(i--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,l,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var l,r,[o,s,i]=a,d=0;if(o.some((t=>0!==e[t]))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(i)var c=i(n)}for(t&&t(a);d<o.length;d++)r=o[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=globalThis.webpackChunkabel_display=globalThis.webpackChunkabel_display||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=n.O(void 0,[431],(()=>n(987)));l=n.O(l)})();